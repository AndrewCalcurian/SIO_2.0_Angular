<app-detalles
[detalle]="detalle"
(onCloseModal)="detalle = false">
</app-detalles>

<app-nueva-recepcion
[nueva]="nueva"
(onCloseModal)="nueva = false">

</app-nueva-recepcion>
<div class="container_ mt-5">
    <div class="card">
        <div class="card-content darker">
            <div class="card mt-5 title_">
                <!-- <span class="red-bar"></span> -->
                <div class="card-content">
                  <h1 class="title blancas">
                    Recepción de materiales
                  </h1>
                  <h2 class="subtitle description blancas">
                    Descripción
                  </h2>
                </div>
            </div>
            <br>
            <button class="button is-info" (click)="NuevaRecepcion()">
                <span class="icon">
                  <i class="fas fa-plus-circle"></i>
                </span>
                <span>Recepción</span>
              </button>
              <br><br>
              <ng-container *ngIf="api.recepciones.length < 1">
                  <div class="columns is-centered">
                    <div class="column is-half">
                      <div class="custom-card">
                        <p class="message">No hay nuevas recepciones</p>
                      </div>
                    </div>
                  </div>
              </ng-container>
                <ng-container *ngIf="api.recepciones.length > 0">
                    <ng-container *ngFor="let recepcion of api.recepciones">
                        <div class="card animate__animated animate__fadeInUp">
                            <div class="card-header dark">
                                <p class="card-header-title">
                                    <strong class="fuente">Documento Nº: </strong>{{recepcion.documento}} - {{recepcion.proveedor.nombre}} - <span class="tag is-danger">{{recepcion.status}}</span> <i class="fas fa-bell shake_button"></i>
                                </p>
                                <button class="card-header-icon" aria-label="more options" [ngClass]="{'clicked':clicked}" (click)="showInfo()">
                                    <span class="icon">
                                      <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <div class="card-content info" [ngClass]="{'hidden': !clicked, 'show': clicked}">
                                <table class="table is-fullwidth is-striped" *ngIf="clicked">
                                    <thead>
                                        <tr>
                                            <th>OC</th>
                                            <th>Lote</th>
                                            <th>Material</th>
                                            <th>Detalles</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>{{recepcion.OC}}</td>
                                            <td>{{recepcion.materiales[0].lote}}</td>
                                            <td>
                                                <div class="circle_"></div>
                                                {{recepcion.materiales[0].material.nombre}} ({{recepcion.materiales[0].material.fabricante.alias}})
                                            </td>
                                            <td>
                                                <a (click)="mostrarDetalle()" class="material-link">
                                                    {{recepcion.cantidad}}{{recepcion.materiales[0].unidad}}
                                                </a>
                                            </td>
                                            <td><i class="fas fa-info-circle blue_"></i>     <i class="fas fa-edit green"></i>     <i class="fas fa-comment"></i></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <br><br>
                    </ng-container>
                </ng-container>
            <br>
        </div>
    </div>
</div>